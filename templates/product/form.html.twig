{% extends 'admin.html.twig' %}
{% block title %}{{ form.vars.value.id ? 'Edit Product' : 'Create Product' }}{% endblock %}

{% block body %}
<div class="max-w-4xl mx-auto p-6">

  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-semibold">
      {{ form.vars.value.id ? 'Edit Product' : 'Create Product' }}
    </h1>
    <a href="{{ path('app_product_index') }}" class="btn btn-ghost">‚Üê Back</a>
  </div>

  <div class="bg-base-100 border rounded-xl p-6 shadow">

    {{ form_start(form, { attr: { enctype: 'multipart/form-data', class: 'space-y-6' } }) }}

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="space-y-4">

          <div>
            <label class="block mb-1 font-semibold">Product Name</label>
            {{ form_widget(form.name, { attr: { class: 'input input-bordered w-full' } }) }}
          </div>

          <div>
            <label class="block mb-1 font-semibold">Category</label>
            {{ form_widget(form.category, { attr: { class: 'select select-bordered w-full' } }) }}
          </div>

          <div>
            <label class="block mb-1 font-semibold">Brand</label>
            {{ form_widget(form.brand, { attr: { class: 'select select-bordered w-full' } }) }}
          </div>

          <div>
            <label class="block mb-1 font-semibold">Supplier</label>
            {{ form_widget(form.supplier, { attr: { class: 'select select-bordered w-full' } }) }}
          </div>

          {% if form.importPrice is defined %}
            <div>
              <label class="block mb-1 font-semibold">Import Price</label>
              {{ form_widget(form.importPrice, { attr: { class: 'input input-bordered w-full' } }) }}
            </div>
          {% endif %}

          <div>
            <label class="block mb-1 font-semibold">Quantity</label>
            {{ form_widget(form.quantity, { attr: { class: 'input input-bordered w-full' } }) }}
          </div>

          <div>
            <label class="block mb-1 font-semibold">Created Date</label>
            {{ form_widget(form.created, { attr: { class: 'input input-bordered w-full' } }) }}
          </div>

        </div>

        <div class="space-y-4">

          {% if form.vars.data and form.vars.data.image %}
            <div>
              <p class="text-sm mb-1">Current Image</p>
              <img src="{{ asset('uploads/' ~ form.vars.data.image) }}"
                   class="w-40 h-40 object-contain rounded border" />
            </div>
          {% endif %}

          <div>
            <label class="block mb-1 font-semibold">Main Image</label>
            {{ form_widget(form.file, {
              attr: {
                class: 'file-input file-input-bordered w-full'
              }
            }) }}
          </div>

          {% if form.galleryFiles is defined %}
            <div>
              <label class="block mb-1 font-semibold">Gallery Images</label>
              {{ form_widget(form.galleryFiles, {
                attr: { class: 'file-input file-input-bordered w-full', multiple: true }
              }) }}
            </div>
          {% endif %}

          <div>
            <label class="block mb-1 font-semibold">Description</label>
            {{ form_widget(form.description, { attr: { class: 'textarea textarea-bordered w-full h-32' } }) }}
          </div>

          <div class="flex gap-3 pt-3">
            <button class="btn btn-primary px-6">
              {{ form.vars.value.id ? 'Update' : 'Create' }}
            </button>

            <a href="{{ path('app_product_index') }}" class="btn">
              Cancel
            </a>
          </div>

          {{ form_row(form._token) }}
          {{ form_end(form, { render_rest: false }) }}

        </div>
      </div>

  </div>

</div>
{% endblock %}

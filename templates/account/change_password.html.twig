{% extends 'base.html.twig' %}

{% block title %}Change password{% endblock %}

{% block body %}
<div class="max-w-xl mx-auto my-10 p-6 bg-white rounded-xl border border-gray-200 shadow-sm">
  <h1 class="text-xl font-semibold mb-4">Change password</h1>

  {{ form_start(form) }}
    <div class="mb-4">
      <label class="block mb-1 text-sm font-medium">Current password</label>
      <div class="relative">
        {{ form_widget(form.currentPassword, {
          attr: {
            class: 'mt-1 block w-full rounded-lg border border-gray-200 px-3.5 py-2.5 pr-10'
          }
        }) }}
        <button type="button"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"
                data-eye>
          <i data-lucide="eye" class="w-5 h-5" data-eye-open></i>
          <i data-lucide="eye-off" class="w-5 h-5 hidden" data-eye-closed></i>
        </button>
      </div>
    </div>

    <div class="mb-6">
      <label class="block mb-1 text-sm font-medium">New password</label>
      <div class="relative">
        {{ form_widget(form.newPassword, {
          attr: {
            class: 'mt-1 block w-full rounded-lg border border-gray-200 px-3.5 py-2.5 pr-10'
          }
        }) }}
        <button type="button"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"
                data-eye>
          <i data-lucide="eye" class="w-5 h-5" data-eye-open></i>
          <i data-lucide="eye-off" class="w-5 h-5 hidden" data-eye-closed></i>
        </button>
      </div>
    </div>

    <button class="btn btn-primary">Update password</button>
  {{ form_end(form) }}
</div>

<script>
  // simple toggle cho cáº£ 2 field password
  document.addEventListener('click', (event) => {
    const btn = event.target.closest('[data-eye]');
    if (!btn) return;

    const input = btn.parentElement.querySelector('input');
    const openIcon = btn.querySelector('[data-eye-open]');
    const closedIcon = btn.querySelector('[data-eye-closed]');
    if (!input || !openIcon || !closedIcon) return;

    const show = input.type === 'password';
    input.type = show ? 'text' : 'password';
    openIcon.classList.toggle('hidden', show);
    closedIcon.classList.toggle('hidden', !show);
  });
</script>
{% endblock %}
